name: PR Format Checker

on:
  pull_request_target: # ä¾ç„¶ç”¨è¿™ä¸ªï¼Œç¡®ä¿æœºå™¨äººæœ‰æƒè¯„è®º
    branches: [main]

permissions:
  contents: read
  pull-requests: write

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          ref: ${{ github.event.pull_request.head.sha }}

      - name: Check Markdown Format
        id: markdownlint
        uses: davidanson/markdownlint-cli2-action@v16
        with:
          globs: "**/*.md"

      - name: Comment on Failure
        if: failure()
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: "ğŸ“‘ **æ ¼å¼æ£€æŸ¥æé†’**ï¼šæ£€æµ‹åˆ°æ–‡æ¡£æ ¼å¼ä¸è§„èŒƒï¼ˆå¦‚æ ‡é¢˜ç©ºæ ¼ã€åˆ—è¡¨ç¼©è¿›ç­‰ï¼‰ã€‚è¯·å‚è€ƒ Action æ—¥å¿—ä¿®æ”¹ï¼Œè¿™æœ‰åŠ©äºä¿æŒæ–‡æ¡£æ•´æ´ï¼"
            });
